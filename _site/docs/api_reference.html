<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Web API Reference | MobilePay-Marketplace</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Web API Reference" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/docs/api_reference.html" />
<meta property="og:url" content="http://localhost:4000/docs/api_reference.html" />
<meta property="og:site_name" content="MobilePay-Marketplace" />
<script type="application/ld+json">
{"url":"http://localhost:4000/docs/api_reference.html","headline":"Web API Reference","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=7fc7342a1db612c7c3643f495777bbbb6b18fd7a">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">MobilePay-Marketplace</a></h1>
      

      <h2 id="web-api-reference">Web API Reference</h2>

<h3 id="-invoicedirect"><a name="direct"></a> InvoiceDirect</h3>

<p>High level <code class="language-plaintext highlighter-rouge">InvoiceDirect</code> flow diagram</p>

<p><a href="Invoice_direct_high_level_flow_diagram.png"><img src="/docs/assets/images/Invoice_direct_high_level_flow_diagram.png" alt="" /></a></p>

<h4 id="create-invoicedirect">Create InvoiceDirect</h4>

<p>You can create an invoice directly to MobilePay app. Notice that request require a customer mobile phone number, name and surname. Check how invoice looks in the app <a href="visual_examples">here</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST api/v1/merchants/{merchantId}/invoices
</code></pre></div></div>

<h5 id="-input"><a id="single-invoice-request" name="single_invoice_object"></a> Input</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Sub Parameter</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceIssuer</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">guid</code></td>
      <td><strong>Required.</strong> The ID of the invoicing department/branch of the merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ConsumerAlias</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">object</code></td>
      <td><strong>Required.</strong> Mobile alias of the MobilePay user to be invoiced.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Alias</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Mobile phone number of the MobilePay user. Should start with a ‘+’ sign and country phone code. <br /> E.g. +4512345678 or +35812345678</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">AliasType</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Alias type of the MobilePay user. <br /> Only value allowed is <code class="language-plaintext highlighter-rouge">Phone</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ConsumerName</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Full name of the MobilePay user.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TotalAmount</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> The requested amount to be paid. <br /> &gt;0.00, decimals separated with a dot.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TotalVatAmount</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> VAT amount. Decimals separated with a dot.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CountryCode</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string(2)</code></td>
      <td><strong>Required.</strong> Country code. Either <code class="language-plaintext highlighter-rouge">DK</code> or <code class="language-plaintext highlighter-rouge">FI</code> is allowed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CurrencyCode</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string(3)</code></td>
      <td><strong>Required.</strong> Currency code. If you set <code class="language-plaintext highlighter-rouge">CountryCode</code> as <code class="language-plaintext highlighter-rouge">DK</code> then it should be <code class="language-plaintext highlighter-rouge">DKK</code>. If you set <code class="language-plaintext highlighter-rouge">CountryCode</code> as <code class="language-plaintext highlighter-rouge">FI</code> then it should be <code class="language-plaintext highlighter-rouge">EUR</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ConsumerAddressLines</code></td>
      <td>         </td>
      <td><code class="language-plaintext highlighter-rouge">string[]</code>    </td>
      <td>Address of consumer receiving the invoice.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DeliveryAddressLines</code></td>
      <td>         </td>
      <td><code class="language-plaintext highlighter-rouge">string[]</code>    </td>
      <td>Delivery address.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceNumber</code>    </td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td><strong>Required.</strong> Invoice number. It will be used if PaymentReference is not filled.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">IssueDate</code>        </td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">date</code>      </td>
      <td><strong>Required.</strong> Issue date of invoice. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DueDate</code>          </td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">date</code>      </td>
      <td><strong>Required.</strong> Payment due date. Must be between today and 400 days ahead, otherwise the request will be declined. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OrderDate</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">date</code></td>
      <td><strong>Required.</strong> Order date of invoice. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DeliveryDate</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">date</code></td>
      <td><strong>Required.</strong> Delivery date of invoice. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Comment</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Additional information to the consumer.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantContactName</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td>Contact name for the individual who issued the invoice.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantOrderNumber</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td>The merchant order number for the invoice used internally by the merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BuyerOrderNumber</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td>The buyer order number for the invoice used externally by the merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PaymentReference</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string(60)*</code></td>
      <td>Reference used on the payment to do reconciliation if merchant has chosen Instant Transfer method. If not filled, InvoiceNumber will be used as reference.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceUrl</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>URL to the Invoice PDF provided by merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceArticles</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">array</code></td>
      <td><strong>At least one is required.</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">ArticleNumber</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Article Number, e.g. 123456ABC</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">ArticleDescription</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Article Description.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">VATRate</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> VAT Rate of article.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">TotalVATAmount</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Total VAT amount of article. Decimals separated with a dot.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">TotalPriceIncludingVat</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Total price of article including VAT.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Unit</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Unit, e.g. Pcs, Coli.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Quantity</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Quantity of article. Allowed to have more than two decimal digits.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">PricePerUnit</code>            </td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Price per unit. Allowed to have more than two decimal digits.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">PriceReduction</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Price reduction.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">PriceDiscount</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Price discount.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Bonus</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Bonus of article.</td>
    </tr>
  </tbody>
</table>

<div class="note">
    <strong>Note:</strong>
    <p>
        * Even though "PaymentReference" can contain up to 60 symbols the recommendation is to use up to 30 symbols. For instant transfers "PaymentReference" will be truncated up down to 30 symbols and included in bank statement.
    </p>
</div>

<h5 id="example">Example</h5>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"InvoiceIssuer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"efd08c19-24cf-4833-a4a4-bfa7bd58fbb2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ConsumerAlias"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4577007700"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"AliasType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Phone"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ConsumerName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Consumer Name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"TotalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
  </span><span class="nl">"TotalVATAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CountryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CurrencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DKK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ConsumerAddressLines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Paradisæblevej 13"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"CC-1234 Andeby"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"WONDERLAND"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"DeliveryAddressLines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Østerbrogade 120"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"CC-1234 Andeby"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"WONDERLAND"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"301"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"IssueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-12"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"DueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-12"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"OrderDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"DeliveryDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-10"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any comment"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"MerchantContactName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Snowboard gear shop"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"MerchantOrderNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"938"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BuyerOrderNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"631"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"PaymentReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"186"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"InvoiceArticles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ArticleNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1-123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ArticleDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Process Flying V Snowboard"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"VATRate"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
      </span><span class="nl">"TotalVATAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w">
      </span><span class="nl">"TotalPriceIncludingVat"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PricePerUnit"</span><span class="p">:</span><span class="w"> </span><span class="mi">288</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PriceReduction"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PriceDiscount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Bonus"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">}</span><span class="w">      
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Response</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 202 Accepted
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"InvoiceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"63679ab7-cc49-4f75-80a7-86217fc105ea"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<div class="note">
Note: If not accepted, invoice will expire 30 days after due date.
</div>

<h4 id="-create-multiple-invoices"><a name="create_multiple_invoicedirect"></a> Create multiple invoices</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST api/v1/merchants/{merchantId}/invoices/batch
</code></pre></div></div>

<p>You can create up to 2000 invoices per single batch.</p>

<h5 id="input-an-array-of-objects-used-to-create-single-invoice">Input (an array of <a href="#single_invoice_object">objects</a> used to create single invoice)</h5>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
     </span><span class="err">//</span><span class="w"> </span><span class="err">InvoiceDirect</span><span class="w"> </span><span class="err">input</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
     </span><span class="err">//</span><span class="w"> </span><span class="err">InvoiceDirect</span><span class="w"> </span><span class="err">input</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>
<h5 id="response">Response</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 202 Accepted
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Accepted"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;original invoice number sent by the merchant&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66119129-aaf7-4ad0-a5b1-62382932b5c6"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;original invoice number sent by the merchant&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e3030a3-61ff-4143-a6bd-8457a09bcb0d"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"Rejected"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;original invoice number sent by the merchant&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ErrorText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;description of error&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">10504</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<div class="note">
<strong>Note:</strong> When multiple invoices are sent, most of the validation is applied asynchronously. The result are sent via <a href="/callbacks">callbacks</a>.
</div>

<h3 id="-invoicelink"><a name="link"></a> InvoiceLink</h3>

<p>High level <code class="language-plaintext highlighter-rouge">InvoiceLink</code> flow diagram</p>

<p><a href="Invoice_link_high_level_flow_diagram.png"><img src="/docs/assets/images/Invoice_link_high_level_flow_diagram.png" alt="" /></a></p>

<h4 id="create-invoicelink">Create InvoiceLink</h4>

<p>You can create an invoice and receive a link. That link can be sent to the user by any channel like email, sms, etc. and user can choose to pay with MobilePay. Check <code class="language-plaintext highlighter-rouge">InvoiceLink</code> flows and how invoice looks in the app <a href="visual_examples#link-flows">here</a>.</p>

<div class="note">
Note: Request does not require a <code>ConsumerAlias</code>. It's because InvoiceLink can be paid by any MobilePay user.
</div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST api/v1/merchants/{merchantId}/invoices/link
</code></pre></div></div>

<h5 id="-input-1"><a id="invoice-link-request" name="single_invoicelink_object"></a> Input</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Sub Parameter</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceIssuer</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">guid</code></td>
      <td><strong>Required.</strong> The ID of the invoicing department/branch of the merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ConsumerAlias</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">object</code></td>
      <td>Mobile alias of the MobilePay user to be invoiced.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Alias</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Mobile phone number of the MobilePay user. Should start with a ‘+’ sign and country phone code. <br /> E.g. +4512345678 or +35812345678</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">AliasType</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Alias type of the MobilePay user. This will be autofilled in the landing page if user opens the link not on the phone <br /> Only value allowed is <code class="language-plaintext highlighter-rouge">Phone</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ConsumerName</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Full name of the MobilePay user.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TotalAmount</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> The requested amount to be paid. <br /> &gt;0.00, decimals separated with a dot.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TotalVatAmount</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> VAT amount. Decimals separated with a dot.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CountryCode</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string(2)</code></td>
      <td><strong>Required.</strong> Country code. Either <code class="language-plaintext highlighter-rouge">DK</code> or <code class="language-plaintext highlighter-rouge">FI</code> is allowed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CurrencyCode</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string(3)</code></td>
      <td><strong>Required.</strong> Currency code. If you set <code class="language-plaintext highlighter-rouge">CountryCode</code> as <code class="language-plaintext highlighter-rouge">DK</code> then it should be <code class="language-plaintext highlighter-rouge">DKK</code>. If you set <code class="language-plaintext highlighter-rouge">CountryCode</code> as <code class="language-plaintext highlighter-rouge">FI</code> then it should be <code class="language-plaintext highlighter-rouge">EUR</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ConsumerAddressLines</code></td>
      <td>         </td>
      <td><code class="language-plaintext highlighter-rouge">string[]</code>    </td>
      <td>Address of consumer receiving the invoice.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DeliveryAddressLines</code></td>
      <td>         </td>
      <td><code class="language-plaintext highlighter-rouge">string[]</code>    </td>
      <td>Delivery address.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceNumber</code>    </td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td><strong>Required.</strong> Invoice number.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">IssueDate</code>        </td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">date</code>      </td>
      <td><strong>Required.</strong> Issue date of invoice. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DueDate</code>          </td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">date</code>      </td>
      <td><strong>Required.</strong> Payment due date. Must be between today and 400 days ahead, otherwise the request will be declined. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">OrderDate</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">date</code></td>
      <td><strong>Required.</strong> Order date of invoice. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DeliveryDate</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">date</code></td>
      <td><strong>Required.</strong> Delivery date of invoice. ISO date format: <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Comment</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Additional information to the consumer.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantContactName</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td>Contact name for the individual who issued the invoice.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantOrderNumber</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td>The merchant order number for the invoice used internally by the merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BuyerOrderNumber</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code>    </td>
      <td>The buyer order number for the invoice used externally by the merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PaymentReference</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string(60)*</code></td>
      <td>Reference used on the payment to do reconciliation. If not filled, invoice number will be used as reference.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceUrl</code></td>
      <td>           </td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>URL to the Invoice PDF provided by merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceArticles</code></td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">array</code></td>
      <td><strong>At least one is required.</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">ArticleNumber</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Article Number, e.g. 123456ABC</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">ArticleDescription</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Article Description.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">VATRate</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> VAT Rate of article.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">TotalVATAmount</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Total VAT amount of article. Decimals separated with a dot.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">TotalPriceIncludingVat</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Total price of article including VAT.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Unit</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> Unit, e.g. Pcs, Coli.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Quantity</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Quantity of article. Allowed to have more than two decimal digits.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">PricePerUnit</code>            </td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Price per unit. Allowed to have more than two decimal digits.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">PriceReduction</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Price reduction.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">PriceDiscount</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Price discount.</td>
    </tr>
    <tr>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">Bonus</code></td>
      <td><code class="language-plaintext highlighter-rouge">decimal</code></td>
      <td><strong>Required.</strong> Bonus of article.</td>
    </tr>
  </tbody>
</table>

<div class="note">
    <strong>Note:</strong>
    <p>
        * Even though "PaymentReference" can contain up to 60 symbols the recommendation is to use up to 30 symbols. For instant transfers "PaymentReference" will be truncated up down to 30 symbols and included in bank statement.
    </p>
</div>

<h5 id="example-1">Example</h5>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"InvoiceIssuer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"efd08c19-24cf-4833-a4a4-bfa7bd58fbb2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ConsumerAlias"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4577007700"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"AliasType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Phone"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ConsumerName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Consumer Name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"TotalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
  </span><span class="nl">"TotalVATAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CountryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"CurrencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DKK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ConsumerAddressLines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Paradisæblevej 13"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"CC-1234 Andeby"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"WONDERLAND"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"DeliveryAddressLines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Østerbrogade 120"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"CC-1234 Andeby"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"WONDERLAND"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"301"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"IssueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-12"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"DueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-12"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"OrderDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"DeliveryDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-10"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any comment"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"MerchantContactName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Snowboard gear shop"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"MerchantOrderNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"938"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"BuyerOrderNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"631"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"PaymentReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"186"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"InvoiceArticles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ArticleNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1-123"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ArticleDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Process Flying V Snowboard"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"VATRate"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
      </span><span class="nl">"TotalVATAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w">
      </span><span class="nl">"TotalPriceIncludingVat"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PricePerUnit"</span><span class="p">:</span><span class="w"> </span><span class="mi">288</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PriceReduction"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PriceDiscount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Bonus"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">}</span><span class="w">      
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h5 id="response-1">Response</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 202 Accepted
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c5d4fde3-81e2-49de-8cfe-8c96f449e367"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"Rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-redirect"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Href"</span><span class="p">:</span><span class="s2">"https://api.sandbox.mobilepay.dk/invoice-restapi/api/v1/consumers/me/invoices/invoices/c5d4fde3-81e2-49de-8cfe-8c96f449e367/link"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="-create-multiple-invoice-links"><a name="create_multiple_invoice_links"></a> Create multiple invoice links</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST api/v1/merchants/{merchantId}/invoices/link/batch
</code></pre></div></div>

<p>You can create up to 2000 invoice links per single batch.</p>

<h5 id="input-an-array-of-objects-used-to-create-single-invoice-link">Input (an array of <a href="single_invoicelink_object">objects</a> used to create single invoice link)</h5>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="err">InvoiceLink</span><span class="w"> </span><span class="err">input</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="err">InvoiceLink</span><span class="w"> </span><span class="err">input</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h5 id="response-2">Response</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 202 Accepted
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Accepted"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;original invoice number sent by the merchant&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66119129-aaf7-4ad0-a5b1-62382932b5c6"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;original invoice number sent by the merchant&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5e3030a3-61ff-4143-a6bd-8457a09bcb0d"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"Rejected"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;original invoice number sent by the merchant&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ErrorText"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;description of error&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">10504</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<div class="note">
Note: The success response is not much different from the regular, non-batch response, but 
it doesn't contain the link itself. This is because we are processing batches asynchronously and can't return an immediate result. The <code>InvoiceLink</code> URLs will be sent back to you via a <a href="callbacks">callback</a>, as soon as they're created.
</div>

<h3 id="-cancel-invoice"><a name="canceling"></a> Cancel invoice</h3>
<p>You can cancel an invoice which has not yet been paid, rejected and has not expired.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PUT api/v1/merchants/{merchantId}/invoices/{invoiceId}/cancel
</code></pre></div></div>

<h5 id="response-3">Response</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<h3 id="-get-invoice-details"><a name="get-details"></a> Get invoice details</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET api/v1/merchants/{merchantId}/invoices/{invoiceId}
</code></pre></div></div>
<h5 id="response-4">Response</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"578a9f10-4e81-4265-bbae-2e8fa33cb83b"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"301"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"IssueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-02"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"DueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-02"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"PaymentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-23"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample Invoice"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceArticles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"ArticleNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1-123"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ArticleDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Process Flying V Snowboard"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"TotalPriceIncludingVat"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
          </span><span class="nl">"Quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"PricePerUnit"</span><span class="p">:</span><span class="w"> </span><span class="mi">288</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"CurrencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DKK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"TotalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceVatTotals"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"VatRate"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
            </span><span class="nl">"TotalVatAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"TotalVatAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w">
    </span><span class="nl">"TotalAmountExcludingVat"</span><span class="p">:</span><span class="w"> </span><span class="mi">288</span><span class="p">,</span><span class="w">
    </span><span class="nl">"MerchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f3dd9011-d930-4063-901d-2a47621e5b76"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceIssuerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"238fe387-f4a4-40e7-ae8a-4c107da2c0ad"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceIssuerName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoice Issuer 1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceIssuerAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Edwin Rahrs Vej 2-12"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceIssuerZipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8220"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceIssuerCity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brabrand"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"MerchantIsoCountryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"LogoUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.qa.mobilepay.dk/invoice-restapi/api/v1/invoiceissuers/238fe387-f4a4-40e7-ae8a-4c107da2c0ad/logo"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"InvoiceUrl"</span><span class="p">:</span><span class="s2">"https://api.merchant.dk/invoice/578a9f10-4e81-4265-bbae-2e8fa33cb83b/pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"PaymentTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1da2195-01c1-4981-bdde-04eb82e362ab"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="-get-invoice-status"><a name="get-status"></a> Get invoice status</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET api/v1/merchants/{merchantId}/invoices/{invoiceId}/status
</code></pre></div></div>
<h5 id="response-5">Response</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"InvoiceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"5e1210f9-4153-4fc3-83ec-2a8fc4843ea6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The table below shows all possible statuses.</p>

<table>
  <thead>
    <tr>
      <th>Status</th>
      <th>Explanation</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">created</code></td>
      <td><em>Merchant created the Invoice</em></td>
      <td>Intermediate</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">invalid</code></td>
      <td><em>Invoice validation failed</em></td>
      <td>Intermediate</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">accepted</code></td>
      <td><em>User swiped to accept the Invoice</em></td>
      <td>Intermediate</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">paid</code></td>
      <td><em>Invoice was paid</em></td>
      <td>Final</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rejected</code></td>
      <td><em>User rejected the Invoice</em></td>
      <td>Final</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expired</code></td>
      <td><em>User did not do do anything until Invoice DueDate + 30 days</em></td>
      <td>Final</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">canceled</code></td>
      <td><em>You canceled this invoice.</em></td>
      <td>Final</td>
    </tr>
  </tbody>
</table>

<p>User accepts the invoice and then pays it immediately or schedules a future payment. The user can change the date, for when the invoice should be paid in the MobilePay app, but nor more than 30 days from the DueDate. For InvoiceLink to be in <code class="language-plaintext highlighter-rouge">rejected</code> state, the user needs to have first <code class="language-plaintext highlighter-rouge">accepted</code> the invoice and scheduled for a future payment. Afterwards, it is possible for the user to reject the invoice.</p>

<p>There are two validation steps :</p>
<ol>
  <li>
    <p>Merchant validation: If all is good, then MobilePay create the invoice, send the callback <code class="language-plaintext highlighter-rouge">created</code> to the merchant, and push message to the user. The outcome of this validation is that the Invoice is <code class="language-plaintext highlighter-rouge">created</code> and delivered to the user, or the Invoice failed to be <code class="language-plaintext highlighter-rouge">created</code>, and is returned to the merchant. If the validation fails, then MobilePay does not create invoice as an entity in MobilePay domain, so in a way it is kinda a final state.</p>
  </li>
  <li>
    <p>User validation: Card validation, user status.. etc. The invoice is delivered to the user, when the merchant received callback about <code class="language-plaintext highlighter-rouge">created</code> invoice. The outcome of this validation is either that the Invoice is <code class="language-plaintext highlighter-rouge">paid</code> or an error message is returned in the app.</p>
  </li>
</ol>

<p>The first state is either <code class="language-plaintext highlighter-rouge">created</code> or <code class="language-plaintext highlighter-rouge">invalid</code>. If you received a callback with status <code class="language-plaintext highlighter-rouge">created</code> then the Invoice has been delivered to the user.</p>

<p>Invoice status flow can be visualized by the following diagram.</p>

<p><a href="assets/images/invoice_flow.png"><img src="/docs/assets/images/invoice_flow.png" alt="" /></a></p>

<h3 id="-user-consent-for-invoicedirect"><a name="direct-invoice-consent"></a> User consent for InvoiceDirect</h3>

<p>Goal of this functionality is for Invoice Issuer to ask users phone number and consent to receive Invoices directly to MobilePay (InvoiceDirect).</p>

<h4 id="attach-a-request-of-consent-to-send-direct-invoices-to-a-particular-invoice">Attach a request of consent to send direct invoices to a particular invoice</h4>

<p>You can request for consent to send <code class="language-plaintext highlighter-rouge">InvoiceDirect</code> to a payer with particular invoice. Consent window is displayed to the user after <code class="language-plaintext highlighter-rouge">InvoiceLink</code> is paid. If user has already granted consent to the invoice issuer, consent window will not be displayed to the user.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST api/v1/directinvoiceconsents
</code></pre></div></div>
<h5 id="-input-2"><a name="request_direct_invoice_consent_object"></a> Input</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceId</code></td>
      <td><code class="language-plaintext highlighter-rouge">guid</code></td>
      <td><strong>Required.</strong> The ID of the invoice to which consent request will be attached.</td>
    </tr>
  </tbody>
</table>

<h5 id="example-2">Example</h5>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h5 id="response-6">Response</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 201 Created
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ConsentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e518e841-c058-422c-b8d9-d4d71bf671c4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"PhoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="get-all-consents-in-specified-state">Get all consents in specified state</h4>

<p>You will get full list of users who granted consent for specific invoice issuer. Users phone number will be provided too.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /api/v1/directinvoiceconsents
</code></pre></div></div>
<h5 id="-input-query-string-parameters"><a name="get_direct_invoice_consents_object"></a> Input (query string parameters)</h5>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InvoiceIssuerId</code></td>
      <td><code class="language-plaintext highlighter-rouge">string(guid)</code></td>
      <td><strong>Required.</strong> The ID of the invoicing department/branch of the merchant.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">State</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><strong>Required.</strong> State of consents to return.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PagingState</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Optional.</td>
    </tr>
  </tbody>
</table>

<p>The table below shows all possible consent statuses.</p>

<table>
  <thead>
    <tr>
      <th>Status</th>
      <th>Explanation</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pending</code></td>
      <td><em>User has not made an action regarding this consent</em></td>
      <td>Intermediate</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">granted</code></td>
      <td><em>User has granted direct invoice consent</em></td>
      <td>Final</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">denied</code></td>
      <td><em>User has denied direct invoice consent</em></td>
      <td>Final</td>
    </tr>
  </tbody>
</table>

<h5 id="example-3">Example</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /api/v1/directinvoiceconsents?invoiceIssuerId=6bb6aff1-b88b-455a-a0ad-c4d1fec2e5d7&amp;state=granted
</code></pre></div></div>

<h5 id="response-7">Response</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"GrantedConsents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ConsentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e518e841-c058-422c-b8d9-d4d71bf671c4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"PhoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4577007700"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Granted"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"PagingState"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<div class="note">
Note: Endpoint supports only granted status.
</div>

<h4 id="get-consent-details">Get consent details</h4>

<p>You can check state of your specific request - if user granted/denied consent with that request or maybe request is still pending.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /api/v1/directinvoiceconsents/{consentId}
</code></pre></div></div>

<h5 id="example-4">Example</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET /api/v1/directinvoiceconsents/e518e841-c058-422c-b8d9-d4d71bf671c4
</code></pre></div></div>

<h5 id="response-8">Response</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ConsentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e518e841-c058-422c-b8d9-d4d71bf671c4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"InvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c0b6e35d-9dfb-47d4-9c9c-1cdfd181e0a4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"PhoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4577007700"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">DirectInvoiceConsent</code> flow in application</p>

<p><a href="assets/images/User_consent_flow _invoice.png"><img src="/docs/assets/images/User_consent_flow%20_invoice.png" alt="" /></a></p>

<p><a href="assets/images/invoice_link_to_invoice_direct.png"><img src="/docs/assets/images/invoice_link_to_invoice_direct.png" alt="" /></a></p>

<h3 id="-error-codes"><a name="error-codes"></a> Error Codes</h3>

<p>All of the endpoints described above can return an error response of this structure:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">correlation_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">guid</code></td>
      <td>Unique id used for logging and debugging purposes.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">error</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Error type. Possible values: <code class="language-plaintext highlighter-rouge">DomainError</code>, <code class="language-plaintext highlighter-rouge">InputError</code> &amp; <code class="language-plaintext highlighter-rouge">ServerError</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">error_code</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Unique error code.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">error_description</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Human-friendly error description.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">error_context</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>Identifies context in which error has occured.</td>
    </tr>
  </tbody>
</table>

<ol>
  <li><code class="language-plaintext highlighter-rouge">HTTP 400</code> , if request input is invalid
    <blockquote>

      <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
   </span><span class="nl">"correlation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54ccc98b-7d9f-40ea-8c1a-249d57126c39"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InputError"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input.TotalAmount : Invalid input</span><span class="se">\r\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoices"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>      </div>
    </blockquote>
  </li>
  <li><code class="language-plaintext highlighter-rouge">HTTP 409</code> , request is not compatible with a current state
    <blockquote>

      <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
   </span><span class="nl">"correlation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8c153279-98f1-4e33-b053-3c6e3555adff"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DomainError"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10504"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoice has already been paid"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoices"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>      </div>
    </blockquote>
  </li>
  <li><code class="language-plaintext highlighter-rouge">HTTP 500</code> , server error
    <blockquote>

      <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
   </span><span class="nl">"correlation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56db684c-7845-4abf-9f19-5632a625a47b"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServerError"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The given key was not present in the dictionary."</span><span class="p">,</span><span class="w">
   </span><span class="nl">"error_context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoices"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>      </div>
    </blockquote>
  </li>
</ol>

<p>When creating <code class="language-plaintext highlighter-rouge">InvoiceDirect</code> or <code class="language-plaintext highlighter-rouge">InvoiceLink</code> these values can be returned as <code class="language-plaintext highlighter-rouge">error_code</code> and <code class="language-plaintext highlighter-rouge">error_description</code>:</p>

<table>
  <thead>
    <tr>
      <th>Error Code</th>
      <th>Error Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>10101</td>
      <td>MobilePay user not found</td>
    </tr>
    <tr>
      <td>10102</td>
      <td>MobilePay user not available</td>
    </tr>
    <tr>
      <td>10103</td>
      <td>MobilePay user not found</td>
    </tr>
    <tr>
      <td>10104</td>
      <td>Invoice already exists</td>
    </tr>
    <tr>
      <td>10105</td>
      <td>Technical error - please contact MobilePay developer support  developer@mobilepay.dk</td>
    </tr>
    <tr>
      <td>10008</td>
      <td>Total amount must be greater than 0</td>
    </tr>
    <tr>
      <td>10106</td>
      <td>Invoice country does not match consumer country</td>
    </tr>
    <tr>
      <td>10107</td>
      <td>Specified currency does not match specified country</td>
    </tr>
    <tr>
      <td>10201</td>
      <td>Total invoice amount is exceeded</td>
    </tr>
    <tr>
      <td>10202</td>
      <td>Invoice issuer not found</td>
    </tr>
    <tr>
      <td>10203</td>
      <td>Account validation error</td>
    </tr>
    <tr>
      <td>10204</td>
      <td>Account validation error</td>
    </tr>
    <tr>
      <td>10205</td>
      <td>Technical error - please contact MobilePay developer support  developer@mobilepay.dk</td>
    </tr>
    <tr>
      <td>10301</td>
      <td>Invoice already exists</td>
    </tr>
    <tr>
      <td>10302</td>
      <td>Merchant not found</td>
    </tr>
    <tr>
      <td>10303</td>
      <td>Invoice issuer not found</td>
    </tr>
    <tr>
      <td>10304</td>
      <td>MobilePay user not found</td>
    </tr>
    <tr>
      <td>10305</td>
      <td>MobilePay user not found</td>
    </tr>
    <tr>
      <td>10306</td>
      <td>MobilePay user not found</td>
    </tr>
    <tr>
      <td>10310</td>
      <td>DueDate must be no later than 400 days from today</td>
    </tr>
    <tr>
      <td>10311</td>
      <td>DueDate must be today or later</td>
    </tr>
    <tr>
      <td>10312</td>
      <td>IssueDate must be no later than today</td>
    </tr>
    <tr>
      <td>10314</td>
      <td>Your daily limit has been reached. No more than 10 invoices can be created per consumer per merchant per day.</td>
    </tr>
  </tbody>
</table>

<h3 id="-validations"><a name="validations"></a> Validations</h3>

<p>A set of business rules apply for an <code class="language-plaintext highlighter-rouge">invoice</code> before it gets created. If any of following rules fail, an <code class="language-plaintext highlighter-rouge">invoice</code> falls to <code class="language-plaintext highlighter-rouge">Not Created</code> state and a response with <code class="language-plaintext highlighter-rouge">error_code</code> and <code class="language-plaintext highlighter-rouge">error_description</code> is returned.</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Country</th>
      <th>Validation</th>
      <th>Error Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DueDate</code></td>
      <td>DK/FI</td>
      <td>CreatedDate &lt;= DueDate &lt; CreatedDate + 400 days</td>
      <td>10310/10311</td>
      <td><code class="language-plaintext highlighter-rouge">DueDate</code> must be no more than 400 days in the future.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">IssueDate</code></td>
      <td>DK/FI</td>
      <td>IssueDate &lt;= CreatedDate</td>
      <td>10312</td>
      <td><code class="language-plaintext highlighter-rouge">IssueDate</code> can not be later than invoice creation date.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CountryCode</code></td>
      <td>DK/FI</td>
      <td>CountryCode == Consumer CountryCode</td>
      <td>10106</td>
      <td><code class="language-plaintext highlighter-rouge">CountryCode</code> must match consumer’s <code class="language-plaintext highlighter-rouge">CountryCode</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CurrencyCode</code></td>
      <td>DK</td>
      <td>CurrencyCode == DKK</td>
      <td>10107</td>
      <td>Only <code class="language-plaintext highlighter-rouge">DKK</code> is supported for DK invoices.</td>
    </tr>
    <tr>
      <td> </td>
      <td>FI</td>
      <td>CurrencyCode == EUR</td>
      <td>10107</td>
      <td>Only <code class="language-plaintext highlighter-rouge">EUR</code> is supported for FI invoices.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">TotalAmount</code></td>
      <td>DK</td>
      <td>TotalAmount &lt;= 15000 DKK</td>
      <td>10201</td>
      <td><code class="language-plaintext highlighter-rouge">TotalAmount</code> is limited to 15000 DKK.</td>
    </tr>
    <tr>
      <td> </td>
      <td>FI</td>
      <td>TotalAmount &lt;= 2000 EUR</td>
      <td>10201</td>
      <td><code class="language-plaintext highlighter-rouge">TotalAmount</code> is limited to 2000 EUR.</td>
    </tr>
  </tbody>
</table>

<h2 id="push-notifications">Push notifications</h2>

<table>
  <thead>
    <tr>
      <th>Description</th>
      <th>Action</th>
      <th>EN</th>
      <th>DK</th>
      <th>FI</th>
      <th>Device</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Push notification when User gets Invoice.</td>
      <td><em>Open context screen</em></td>
      <td>[Invoice Issuer name] wants to send you a bill</td>
      <td>[Invoice Issuer name] har en regning til dig</td>
      <td>[Invoice Issuer name] haluaa lähettää sinulle laskun</td>
      <td>iOS &amp; Android</td>
    </tr>
    <tr>
      <td>In app push when User gets Invoice</td>
      <td><em>Open context screen</em></td>
      <td>[Invoice Issuer name] wants to send you a bill</td>
      <td>[Invoice Issuer name] har en regning til dig</td>
      <td>[Invoice Issuer name] haluaa lähettää sinulle laskun</td>
      <td>(just for iOS)</td>
    </tr>
    <tr>
      <td>Push notification when User opens Invoice via web</td>
      <td>Open context screen</td>
      <td>Pay a bill</td>
      <td>Betal en regning</td>
      <td>Maksa lasku</td>
      <td>iOS &amp; Android</td>
    </tr>
    <tr>
      <td>In app push when User opens Invoice via web</td>
      <td>Open context screen</td>
      <td>Pay a bill</td>
      <td>Betal en regning</td>
      <td>Maksa lasku</td>
      <td>(just for iOS)</td>
    </tr>
  </tbody>
</table>

<h2 id="sms">SMS</h2>
<ul>
  <li><strong>SMS to user before due date</strong></li>
</ul>

<p>SMS is sent for ignored (not accepted or rejected) invoices.</p>

<ul>
  <li>SMS is sent to the user one day prior the due date at 13.30 PM</li>
  <li>If the due date equals the current date and the invoice is received before 13:30 PM then the SMS is sent to the user on due date</li>
  <li>If the due date equals the current date and the invoice is received after 13:30 PM then the the SMS is sent to the user one day after the due date</li>
</ul>

<p><strong>SMS to user when payment fails</strong></p>
<ul>
  <li>If the future payment can’t be processed SMS is sent at 10:00, but only if user hasn’t completed payment manually until this time.</li>
</ul>

<h5 id="limits">Limits</h5>
<ul>
  <li>Consumer daily invoice count &lt;= 10. No more then 10 invoices can be created per consumer from single merchant.</li>
</ul>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
